#!/bin/bash

# Check if any of the packages are actually installed before trying to remove
if pacman -Q "$@" &>/dev/null; then
  sudo pacman -Rs --noconfirm "$@" || exit 1
fi

for pkg in "$@"; do
  # Secondary check to ensure the package is no longer in the local database
  if pacman -Q "$pkg" &>/dev/null; then
    echo -e "\033[31mError: Package '$pkg' was not successfully removed\033[0m" >&2
    exit 1
  fi
done

exit 0
