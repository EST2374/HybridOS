#!/bin/bash

SDDM_THEME="/usr/share/sddm/themes"

selected=$(find "$SDDM_THEME" -maxdepth 1 -mindepth 1 -type d | sort | while read -r path; do
  echo "$(basename "$path" | sed -E 's/(^|-)([a-z])/\1\u\2/g; s/-/ /g')"
done | walker --dmenu -p "Select SDDM Theme")

if [ -n "$selected" ]; then
  theme_folder=$(echo "$selected" | tr '[:upper:]' '[:lower:]' | sed 's/ /-/g')

  echo -e "[Theme]\nCurrent=$theme_folder" | sudo tee /etc/sddm.conf.d/theme.conf >/dev/null

  notify-send "SDDM" "Theme set to $selected"
fi
